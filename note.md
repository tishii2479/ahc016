# 全体を通して

- 方針は固めすぎない
    - 実装しすぎない
    - 思い込みをなくす
- 少しずつ改善する
- 何か問題特有のヒューリスティックは必要
    - ボトムアップに考える
    - 問題の観察を丁寧にする
- 貪欲の質を上げる

# 11/11

「次数列の復元 + グラフ構造を使ったヒューリスティック」がテーマっぽい

- 次数列の復元
    - 次数列の距離
- グラフ構造を使ったヒューリスティック
    - 連結成分の個数
    - 二部グラフ
    - ウニ
- M, epsが大きいときはNを大きめにする必要がありそう
- ある程度グラフを作ったら辺の接続を入れ替える焼きなまし?
- グラフ同士の距離が遠くなるように
- クエリのグラフからシミュレーションして、一番確率が高いグラフを出力

- M、epsごとに埋め込みができる
    - グラフの情報は整数で埋め込みできる

- 次数列の距離
    - 次数列をソートした時の各要素の差の二乗和
        ```
        d(0122, 0013) = 0 + 1 + 1 + 1 = 3
        ```
    - 必要な操作の最小か平均回数
- 次数列からグラフ構築
    - Havel-Hakimi
        - `O(N^2 log N)`
    - 普通にグラフから次数列を作るで良い
        - ソートで`O(N log N)`

- 復元方法
    - シミュレーションした結果、次数列の距離が最小なものを探す
        - epsが大きい時に厳しそう
    - シミュレーションし直すのか、二乗和を考えるだけ?
        - 実行時間5秒あるし、何かしらしそう
        - 必要な操作の最小か平均回数を求める

- 事前分布をなるべく離す
    - 辺の総数をなるべく離す
        - 等間隔でいいのか、次数列の分布を考えると不均一かも
    - 二項分布
        - `M = N * (N - 1) / 2`
        - `S = 元の辺の総数`
        - `T = 操作後の辺の総数`
        ```
        E(T | S, eps)
            = S * (1 - eps) + (M - S) * eps
            = S + (M - 2 * S) * eps
            = S * (1 - 2 * eps) + M * eps

        eps = 0     ->   1 * S
        eps = 0.4   -> 0.2 * S + 0.4 * M
        eps = 0.5   ->           0.5 * M
        ```
        - ランダムウォーク、マルコフ連鎖
        - `TODO:` ちゃんと確率分布`P(T | S, eps)`を考える
            - 周辺化で解けそう
- 次数の分布
    - 離した方がいいのか、一緒の方がいいのか
        - 他のサイズのグラフによる
            - ここが焼けそうな気がする
            - でも埋め込めるんだよな
        ```
        a = 4 1 1 1 1 0 0 0
        b = 2 2 2 2 0 0 0 0
        c = 7 1 1 1 1 1 1 1
        d = 2 2 2 2 2 2 2 0

        e = 2 2 2 2 2 0 0 0
        f = 5 1 1 1 1 1 0 0

        s(a) = s(b) = 8
        s(c) = s(d) = 14
        s(e) = 10

        d(a, e) = 8
        d(d, e) = 8
        ```
        - `TODO:` 本質は何か
- サイズ以外でグラフの距離を決めるのは
    - 次数の分布
    - 辺の接続の仕方は関係あるか
        - 同じ次数列でも違うグラフがある
        - 関係ありそう
            - 辺の接続が切り替わった時の次数列の変化がグラフによって変わるため
        - 関係あるなら、辺の接続は隣接行列で持つ必要がある
- 高速化
    - あらかじめ作ったmaskでxorをとる

# 11/12

- 橋の数は使えそう
    - 削除と追加が同じ確率で行われるので、そこまでかも
- グラフの距離は必要な操作の最小か平均回数
    - 頂点番号がないので、厳密に求めるのは難しい

## 方針

### 1. なるべく離れた位置にあるグラフを構築する

1. M個のグラフをランダムに初期化する
2. 隣接するグラフの距離が遠くなるように焼く
    - 辺の接続を入れ替える
    - 辺の接続先を変更する
3. 構築したグラフを出力する

### 2. クエリを受け取って復元する　

1. グラフを受け取る
2. 受け取ったグラフと構築したグラフの距離を求め、最も近いグラフを出力する

### 必要な要素

- グラフの距離の正確な定義
    - グラフの類似度を測る手法
    - 辺の削除、追加の必要回数
        - グラフ編集距離（Graph Edit Distance）の辺だけ
    - グラフの編集距離を求める問題はNP-Hard
        - 頂点をどう対応させるか（ノードマッピング）をA*アルゴリズムを使って最適化するとある程度のサイズまで解けるらしい
            - https://proceedings-of-deim.github.io/DEIM2022/papers/I44-1.pdf

- 頂点番号の対応付けを行うと、編集距離は計算できる
    - 対応付けを最適化して、編集距離を最小にした時の値を使う
        - 焼きなまし
            - 2頂点をswap
            - 遅い
        - ビームサーチ
            - 構築するときはこっち?
            - 早い
        - ある程度の貪欲

- M個のグラフの構築は工夫が必要
    - 全体の距離を考慮した評価関数を考える必要がある
- 復元するときには辺の追加、削除は考える必要がある

## 今後の方針

1. 構築
2. 復元

- 復元
    - Mが大きくても、最初に辺の総数によってある程度絞り込める
    - 難しい問題ほど時間を多く取る

# 11/13

類似度をより正確に、高速に求める

- ビームサーチで初期解を作る
- 編集距離の近似手法が必要かも

- グラフ生成の評価関数をminではなく総和に
    - 近い値を重視するために、距離の0.5乗を使う

- 辺の総数の平均の変化を考慮する必要がある
    - 特にepsが大きいとき
        -　辺の総数は `N * (N - 1) / 2` に近づく
    - グラフの単純な類似度だけだと、epsが大きい時に駄目

- epsが大きい時の対策を考える
    - 何回かシミュレーションして、その後類似度を求める
        - 相当良い
- m, epsが小さいときは強い

```
N = 30
ave: 6509895.81
err ave: 46.21
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  44859999   26919002    8708427    3506621    6348444    1549501      24174      74430
   40~70 |  16277643    7419666    2225835     336712      63930      22186       8730       6471
  70~100 |  12251409    1337414     364372     130049      12719       6437       2570       2233
```

- 埋め込みはNの値だけしか無理そう
    - ファイルサイズは 512 KiB
    - 構築は後でやる必要がありそう
- 構築と復元の時間管理が必要
- Nの調整は結構大変

### 改善点

- epsが大きい時をもう少しまともに考える
- グラフの構築
    - 次数列の分布を考慮する
- グラフの類似度の求め方
    - 次数列の分布の類似度

### 現状の解法の整理

1. グラフの構築
    1. i番目に構築するグラフの辺の総数を`N * (N - 1) / 2 / (M - 1) * i`として、順番に頂点に辺を足す
2. グラフの復元
    1. 構築したグラフをモンテカルロでシミュレーションして、受け取ったグラフとの類似度を求める
        - 辺の総数が違いすぎるグラフはあらかじめ弾いている

### 改善点

- 類似度の求め方
    - 近い辺の数を持つグラフは構造で区別する
    - やはりグラフの構造を使いたい
        - 連結成分の個数、連結成分のサイズ
    - これを考慮したグラフの構築をする
- 他の復元方法の模索
- Nの最適化はしばらくしない

- 辺の総数を等間隔にしている
    - 最後の方が間違えやすいかも
- 辺の総数が隣のグラフに間違えることが多い
    - 隣のグラフと構造的に違いを作る
        - 次数列の分布の違い
            ```
            ooooo
            o
            o
            ooooo
            ```
            と
            ```
            o
            ooooo
            o
            ```
        - 連結成分のサイズ
            ```
            9 1 1 ... 1 0 ... 0 0
            3 3 ... 3 2 ... 2 2 1
            ```

### 研究テーマ

ノイズに強いグラフとは

### スコア観察

- epsが大きいときにちょっとスコアが下がってるかも
    - サンプル少ないだけ?

```
commit: 5616046
ave: 13615107.34
err ave: 8.22
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  39500000   19027778   16666667   16190476   15833333   13490538    7233798    5806960
   40~70 |  32154672   20138889   11666666    9620000    9500000    8113180    3811784    1631015
  70~100 |  24687500   15055555   10357142    8840000    7860000    2839391     859418      46886
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.20       0.17       0.00       0.29       0.50       2.50       4.40       9.00
   40~70 |      1.10       0.33       0.33       0.40       0.50       2.20      12.50      18.67
  70~100 |      0.12       1.00       0.43       1.20       2.33      15.00      24.50      60.57
-------------------------------------------------------------------------------------------------

commit: c76d0ee
ave: 16098469.64
err ave: 8.92
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  46666666   27777777   22500000   19428571   19000000   12272512    5553155    5790968
   40~70 |  38447743   28194444   18416666    9800000    9500000    7978882    3797293    1841240
  70~100 |  32083333   14765901   11330165    9200000    8400000    3041891     938642      39552
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.00       0.29       0.50       9.00       9.00       9.00
   40~70 |      1.30       0.33       0.67       0.20       0.50       2.40      12.33      17.67
  70~100 |      0.38       5.33       5.43       0.80       1.67      14.75      24.33      59.43
-------------------------------------------------------------------------------------------------

commit: 71b1abb
ave: 16178182.87
err ave: 8.9
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  46666666   27777777   22500000   19428571   19000000   12677449    5872074    5785518
   40~70 |  38447743   28194444   18416666    9800000    9000000    7888793    3642909    1933536
  70~100 |  32916666   14407179   11410748    9200000    8130000    2940202     796059      44256
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.00       0.29       0.50       8.33       8.40       9.14
   40~70 |      1.30       0.33       0.67       0.20       1.00       2.60      12.83      17.67
  70~100 |      0.12       5.67       5.43       0.80       2.00      15.50      25.50      58.57
-------------------------------------------------------------------------------------------------

commit: f9a95f0
if eps <= 0.3 || m <= 40 { f1, f2, f3 } else { f1, f2 }
ave: 16305794.89
err ave: 7.72
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  46666666   27777777   22500000   19714285   19000000   12749018    5897919    5785518
   40~70 |  38447743   28194444   18416666    9800000    9000000    8390200    4345421    2576736
  70~100 |  32916666   14407179   11535276    9200000    8400000    3209126     976265     108559
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.00       0.14       0.50       8.00       8.20       9.14
   40~70 |      1.30       0.33       0.67       0.20       1.00       1.80      11.17      15.00
  70~100 |      0.12       5.67       5.29       0.80       1.67      13.75      23.00      47.43
-------------------------------------------------------------------------------------------------
```

# 11/14

- 構築方法の模索
    - 次数列以外の類似度
    - 3つ目を作るか
        - 難しいM, epsの時は3つ目があった方が良さそう
        - 一様分布以外を考える
    - 類似度の計り方を工夫する
- 他の復元方法の模索
    - モンテカルロ以外

- 間違え方の集計をする
- 辺の総数の差は多分不均一が良いかも
    - 真ん中への近づき方が端っこの方が強い
    - 操作後の辺の総数を等間隔にしたい
        - 線形だから一緒か
    - でも予測のしやすさは違いそう

- 誤りが10あると大体スコアが0.1倍される
    - 10以上あるなら、N = 100にした方が良い

## TODO:

- モンテカルロ
    - 高速化
    - 中央値使うとか
- グラフの構造を使った類似度
- 次数列の分布の評価方法の検討
    - 現状はソートして2乗誤差
    - KLダイバージェンス
- Nの最適化

- 構築方法
    - 辺の総数が近いグラフ同士を区別したい
        - 接続している頂点同士の次数
        - 接続している頂点同士の共通している頂点
    - 違う構成方法であっても、似てしまう分布がある
        - ex: 0003 0と1, 44と45など
        - 辺の総数は不均一であっても良い
    - 似た頂点同士の関連
    - 二部グラフ
    - 構築したグラフを少し焼くのも良さそう
- 復元
    - 試行回数増やしても変わらない
    - 操作による分布のシフトが大きすぎる時には、復元の影響は少なくなる
    - スコアが近い時に何回かサンプリングし直す
    - 辺の総数も考慮する

```
commit: e642797
if eps <= 0.3 || m <= 40 { [f1, f2, f4] } else if eps >= 0.35 && m >= 70 { [f1, f2, f3, f4] } else { vec![f1, f2, f4, f3, f1, f2, f4] }
ave: 17832700.04
err ave: 5.53
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  46666666   27777777   22500000   19714285   18100000   12238799    7468067    5642675
   40~70 |  46666666   29166666   16587416   10000000    9500000    9258000    6959328    4350907
  70~100 |  32499999   20325000   15363864   10000000    9333333    4915633    2344403     234353
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.00       0.14       1.00       6.50       4.80       8.57
   40~70 |      0.00       0.00       1.67       0.00       0.50       0.80       3.67       8.00
  70~100 |      0.25       2.00       2.57       0.00       0.67       9.50      14.50      41.29
-------------------------------------------------------------------------------------------------
```

- 難しい時は分布を増やすと良い
- シミュレーションしたで平均を取る

- 分布の候補
```
--oooooooooo
--oooooooooo
oooo
oooo
oo
oo
oo
oo
oo
```

- 最初と最後が分布が被りやすい、かも?
- 分布を多く作って、離れるように選ぶ
    - ここを焼く or 山登り
        - 初期解は辺の総数を考慮してルールベースに作る
        - 近傍は隣のものを使う、スワップ
    - シミュレーション後の分布を作っておいて、それを比較する
    - 分布同士の類似度は事前に計算しておく
    - 前後10個の分布との距離の最小値の最大化

```
commit: 1e2b0d9
ave: 17900238.47
err ave: 5.52
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  46666666   27777777   22500000   20000000   18100000   12398680    7224090    5602681
   40~70 |  46333333   28611111   18416666   10000000    9500000    9112200    6369252    4497762
  70~100 |  32916666   20325000   15721007    9800000    9333333    5218323    2400826     225690
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.00       0.00       1.00       6.50       5.00       8.71
   40~70 |      0.10       0.17       0.67       0.00       0.50       1.00       4.67       7.67
  70~100 |      0.12       2.00       2.43       0.20       0.67       8.75      14.67      40.86
-------------------------------------------------------------------------------------------------
```

## 11/16

- 分布を多く作って、離れるように選ぶ
    - ここを焼く
        - 初期解は辺の総数を考慮してルールベースに作る
        - 辺の総数でソートしておく
            - 近傍は隣のものを使う、スワップ
    - シミュレーション後の分布を作っておいて、それを比較する
    - 分布同士の類似度は事前に計算しておく
        - クエリに答えるときもこれを使う
    - 前後10個の分布との距離の最小値の最大化


- 分布との距離の最小値の最大化だとうまくいかない
    - ある程度制限する必要がありそう
    - 制限してもだめ
    - 010101010を良いとする評価関数が必要
- 総和は最もだめ
    - 00000001111111みたいになる
- なるべく次数が均等なグラフを作る
- TODO: パラメータをまとめる

```
case=2000
ave: 16646882.614
err ave: 4.656
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |  41666666   26696165   23436956   19831914   17838916   11681766    8783634    5389942
   40~70 |  44320987   25982632   18908787   10284210   10077777    9010463    5975442    1511045
  70~100 |  42844659   24193193   14739435    9956140    9561022    6239299    2556891     430337
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~40 |      0.00       0.00       0.04       0.09       1.21       6.21       2.70       8.69
   40~70 |      0.04       0.20       0.60       0.02       0.13       1.20       5.55      22.49
  70~100 |      0.26       0.93       2.84       0.04       0.46       5.16      14.81      36.46
-------------------------------------------------------------------------------------------------
```

```
model=sa
case=1000
ave: 16919912.356
err ave: 4.027
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |  48148147   27314814   22500000   20000000   20000000   19082625   10546750    9069898
   20~30 |  40350876   25490196   24210526   19875000   19076190   15506092    9728210    5279397
   30~40 |  42857142   26086956   23750000   19818181   17179931   10474958    8139391    3854040
   40~50 |  49019607   26022727   21666666   11428571   10588235    9880467    8255523    2271815
   50~60 |  39393939   26466666   19230769   10000000    9933333    9629166    6863401    1154385
   60~70 |  40350876   26712962   17881666   10000000    9952380    9491304    6395079    1460969
   70~80 |  37254901   25726190   17873500   10000000    9933333    8006897    3973491     743230
   80~90 |  44901960   23362812   15086608   10000000    9846153    7150254    2476741     301031
  90~100 |  41347618   23318205   14808033   10000000    9650000    4986916    3109237     149663
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------　　------------------------------------------------------
   10~20 |      0.00       0.00       0.00       0.00       0.00       0.50       0.17       1.10
   20~30 |      0.00       0.00       0.00       0.06       0.48       2.58       1.29       8.77
   30~40 |      0.00       0.00       0.00       0.09       1.67       6.92       3.62      11.35
   40~50 |      0.00       0.05       0.13       0.00       0.00       0.45       2.00      17.73
   50~60 |      0.00       0.08       0.23       0.00       0.07       0.38       4.05      25.65
   60~70 |      0.00       0.06       0.47       0.00       0.05       0.52       5.12      22.79
   70~80 |      0.00       0.19       0.93       0.00       0.07       2.33       9.50      34.07
   80~90 |      0.06       1.12       1.85       0.00       0.15       3.37      16.14      37.40
  90~100 |      0.48       1.40       3.67       0.00       0.36       7.31      12.91      44.50
-------------------------------------------------------------------------------------------------

model=baseline
case=1000
ave: 16455288.254
err ave: 4.497
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |  48148147   27314814   22500000   20000000   19375000   17404834    9748556    7280817
   20~30 |  40350876   25490196   24078947   19875000   18169990   12870336    8599951    4929742
   30~40 |  42857142   26086956   23750000   19818181   17142174    8832418    7736803    3743984
   40~50 |  49019607   25909090   21333333   11428571   10529411    9453678    6624050    1941468
   50~60 |  39393939   26066666   18673076   10000000    9800000    8999370    5540921    1252216
   60~70 |  39999999   26388888   17094316   10000000    9904761    8693086    5265244    1264224
   70~80 |  37254901   25476190   17540166   10000000    9613333    6999230    3482517     609509
   80~90 |  44901960   23382291   13373958   10000000    9776923    6093934    2268215     442715
  90~100 |  40714285   22230868   14063250    9952380    9313571    4178809    2507955     185402
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.00       0.00       0.00       0.00       0.31       1.75       1.00       3.67
   20~30 |      0.00       0.00       0.05       0.06       1.00       4.67       2.57       9.80
   30~40 |      0.00       0.00       0.00       0.09       1.67       8.92       4.29      11.88
   40~50 |      0.00       0.09       0.27       0.00       0.06       0.90       4.38      19.60
   50~60 |      0.00       0.24       0.46       0.00       0.20       1.08       6.18      23.12
   60~70 |      0.11       0.17       0.87       0.00       0.10       1.39       7.06      23.79
   70~80 |      0.00       0.29       1.07       0.00       0.40       3.75      11.81      34.71
   80~90 |      0.06       1.12       2.80       0.00       0.23       5.37      15.71      35.07
  90~100 |      0.67       1.93       3.93       0.05       0.71       9.31      14.35      43.25
-------------------------------------------------------------------------------------------------

model=baseline, param-tuned
case=1000
ave: 22339014.629
err ave: 5.173
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 101162284   59432571   37770057   33145876   21296508   17673472   11478402    7376162
   20~30 |  80085060   46080908   34724359   25304669   18361761   14004515    9222592    4647873
   30~40 |  72193877   42941910   30382977   22179891   17816797   13175182    9014449    3444492
   40~50 |  66270198   33714005   28437342   20083806   14920279   11597224    6306282    1961989
   50~60 |  53961340   32401522   23838956   18286194   13767633    9614006    5397363    1175166
   60~70 |  47747149   30074557   20969287   16538119   11428763    8585250    5420137    1295886
   70~80 |  44094909   27285186   20447419   14393020   11081168    7217574    3539447     608056
   80~90 |  49607386   23722771   16623232   13905781   10983338    6364684    2384340     439199
  90~100 |  45077625   23826115   16031475   11809165   10264886    3935286    2227385     141477
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      1.33       1.17       2.40       1.42       2.31       1.81       1.88       4.14
   20~30 |      1.84       1.29       1.58       1.75       2.05       2.54       2.76      10.66
   30~40 |      0.79       1.30       1.38       1.68       1.39       1.54       2.48      12.41
   40~50 |      1.18       1.73       1.53       0.64       1.41       1.10       5.23      19.80
   50~60 |      1.18       1.16       1.15       1.43       1.33       1.75       6.82      24.12
   60~70 |      1.16       1.06       1.40       1.29       1.81       2.30       6.94      23.14
   70~80 |      1.35       1.57       1.27       1.65       1.20       3.75      11.69      34.79
   80~90 |      1.24       1.38       2.10       1.32       1.00       5.26      15.29      35.13
  90~100 |      0.90       1.33       2.40       1.86       1.43       9.92      15.96      44.33
-------------------------------------------------------------------------------------------------

model=sa, param-tuned
case=1000
ave: 23699662.609
err ave: 4.37
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 106913644   62713808   46006517   36161121   25934373   20277041   13663551    9786490
   20~30 |  85330100   49025165   38549890   27444889   21203981   15848585   10535910    5223718
   30~40 |  74331774   43652638   32385310   24564853   19513460   13812416    9433631    4117024
   40~50 |  68570924   35094374   26720959   20492247   16522580   12232504    7215618    2302249
   50~60 |  55621399   32705512   23718967   18847344   14974454   10577665    6997801    1374059
   60~70 |  48718620   31068944   21755057   17258567   12781493    9841190    6227885    1461485
   70~80 |  44836271   27927933   21210328   15720499   12083398    8563494    4045917     759124
   80~90 |  49549636   23975748   17797657   14765292   10991895    7084502    2563945     472141
  90~100 |  44086195   24051585   17652867   13031300   10866764    4869229    2834778     109671
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.83       0.67       0.60       0.58       0.31       0.38       0.25       1.24
   20~30 |      1.11       0.71       0.53       0.88       0.62       1.21       1.43       9.49
   30~40 |      0.50       1.13       0.69       0.73       0.44       1.08       2.10      11.47
   40~50 |      0.82       1.45       2.07       0.43       0.35       0.55       3.77      17.20
   50~60 |      0.82       1.08       1.19       1.07       0.47       0.83       4.36      23.76
   60~70 |      0.95       0.67       1.00       0.81       0.71       0.96       5.25      22.93
   70~80 |      1.18       1.29       0.87       0.80       0.33       1.75      10.06      33.79
   80~90 |      1.29       1.25       1.45       0.74       0.92       3.95      15.79      36.00
  90~100 |      1.14       1.33       1.40       0.90       0.93       7.54      13.26      45.92
-------------------------------------------------------------------------------------------------
```

### TODO

- 分布の焼きなまし
    - うまくいっていた（`notebooks/process_result.ipynb`）
    - たまにスコアが下がることがあるので調整する
        - 下がった時には貪欲を使う
        - 温度の調整
    - 評価関数の検討
    - 同じグループに少し辺の数が違う候補を複数用意する
- 分布の類似度の測り方
- Nの最適化
    - ベースライン（高速なやつ）を使ってある程度幅を狭める
- グラフの構造的な違いの考察
- 難しいケースの対策

- `TODO:`の消化、コードの整備

- 同じグループに少し辺の数が違う候補を複数用意する
    - 分布の候補も増やす
- 分布の類似度
    - 次数の二乗和じゃなくて、次数の分布をそのまま評価する
- スコア計算の計算範囲を制限する
    - 必要なところだけ類似度を計算する
- 丸め誤差が起きてないかチェックする

## 11/17

- 実行時間のチェック

```
commit: ccd5c40
ave: 25135801.237
err ave: 3.528
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 111177248   66799943   47844017   37190806   26719963   20738315   13824376   10236637
   20~30 |  88523333   50493154   38856908   28879708   21478236   16679996   11518339    6910594
   30~40 |  76558956   47691378   33488733   25576860   19308884   15021490   10841766    5305113
   40~50 |  70607280   38450769   30499961   20448920   16609376   12788444    9155818    2532416
   50~60 |  58350222   35206197   25894398   20805113   15087710   11108790    7887825    1516435
   60~70 |  51667250   32066299   22848100   18073783   13613014   10219706    7313175    1675155
   70~80 |  46989450   29995460   22952784   16645604   12361188    9171053    4578470     527527
   80~90 |  53125044   27104833   19404546   15542950   11821913    8681305    3643866     400169
  90~100 |  47151453   26170638   19377211   13960469   11716776    6841380    3441219     141826
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.28       0.06       0.20       0.25       0.06       0.19       0.12       0.71
   20~30 |      0.68       0.41       0.47       0.38       0.48       0.75       0.52       5.37
   30~40 |      0.14       0.26       0.38       0.27       0.56       0.33       0.57       7.76
   40~50 |      0.41       0.45       0.87       0.43       0.29       0.35       1.46      18.13
   50~60 |      0.32       0.32       0.31       0.14       0.40       0.29       2.95      23.29
   60~70 |      0.26       0.33       0.53       0.33       0.10       0.57       3.75      22.14
   70~80 |      0.65       0.57       0.07       0.25       0.13       1.08       9.19      35.43
   80~90 |      0.41       0.12       0.60       0.21       0.23       1.79      12.07      36.93
  90~100 |      0.33       0.33       0.47       0.24       0.14       3.92      12.17      44.50
-------------------------------------------------------------------------------------------------

commit: bc201a3
ave: 25302715.511
err ave: 3.232
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 109339285   66386583   48376068   37954695   26467770   20944841   13805618   10590830
   20~30 |  86377791   51464222   39408941   29615385   21917300   16907714   11657688    6953504
   30~40 |  76771541   47649108   33471992   25376402   19392051   14800617   10599045    5494614
   40~50 |  72294372   39288590   31616737   20995612   16715569   13023168    8832164    2467187
   50~60 |  60031319   35488569   26117097   20445891   15308942   10997603    7607877    1850423
   60~70 |  52016799   32998216   23648288   18110905   13252797   10291060    7493147    1943575
   70~80 |  48549388   31209023   22155653   16557821   12262308    9444799    4976973     980970
   80~90 |  54390217   26478266   19328320   15545564   11829709    9072446    3933893     631394
  90~100 |  48104005   26180283   18855262   13812378   11624113    7283819    4145185     177793
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.44       0.11       0.10       0.08       0.12       0.12       0.12       0.33
   20~30 |      1.00       0.18       0.32       0.12       0.29       0.67       0.38       5.17
   30~40 |      0.14       0.30       0.38       0.36       0.50       0.50       0.81       7.12
   40~50 |      0.12       0.23       0.47       0.21       0.24       0.15       1.85      16.60
   50~60 |      0.05       0.24       0.23       0.29       0.27       0.38       3.23      22.00
   60~70 |      0.21       0.06       0.20       0.33       0.33       0.48       3.25      20.71
   70~80 |      0.29       0.19       0.40       0.30       0.20       0.83       7.62      32.00
   80~90 |      0.12       0.38       0.60       0.21       0.23       1.26      10.71      32.67
  90~100 |      0.10       0.40       0.73       0.33       0.21       3.23       9.96      43.17
-------------------------------------------------------------------------------------------------

commit: ffe09a8
ave: 25427338.62
err ave: 3.197
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 109144748   67196769   48344017   37630367   26511630   21069841   13872822   10297004
   20~30 |  88997017   51649690   39893220   29734242   21710972   17267420   11053067    6861281
   30~40 |  77069160   48081568   34348108   25756785   19586810   14913104   10805581    5623802
   40~50 |  70542738   38608894   31272251   20972685   16802074   13098798    8917668    2660075
   50~60 |  58666961   35206600   26243574   20624463   15415781   11253879    7782383    1748850
   60~70 |  52495267   32984988   23485799   18110489   13453597   10399747    7558881    1482620
   70~80 |  49675651   31305297   22420653   16458707   12333960    9622405    5082805     651167
   80~90 |  54717015   27086558   19902529   15615227   11922585    9228826    4406259     574680
  90~100 |  47905593   26388776   19917462   13822677   11542764    7447352    4361144     224364
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.44       0.00       0.10       0.17       0.12       0.06       0.08       0.62
   20~30 |      0.63       0.18       0.21       0.12       0.38       0.46       0.90       5.23
   30~40 |      0.07       0.22       0.12       0.23       0.44       0.42       0.62       6.82
   40~50 |      0.47       0.41       0.60       0.21       0.18       0.10       1.69      16.27
   50~60 |      0.27       0.32       0.19       0.21       0.20       0.17       3.00      22.82
   60~70 |      0.11       0.06       0.27       0.33       0.19       0.39       3.62      23.14
   70~80 |      0.06       0.14       0.33       0.35       0.13       0.58       8.44      31.93
   80~90 |      0.06       0.12       0.35       0.16       0.15       1.16       9.79      34.20
  90~100 |      0.14       0.27       0.20       0.33       0.29       3.15       9.39      42.67
-------------------------------------------------------------------------------------------------

center-square
commit: dd32eed
ave: 25571888.432
err ave: 2.523
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 107603174   66317139   47959401   37580764   26884437   20864878   13939065   10427513
   20~30 |  88802077   51649690   40320425   30064103   22253365   17351313   11774560    7676242
   30~40 |  75715702   46887681   33890518   25784460   19796669   15038068   10725346    6821559
   40~50 |  71967574   38596007   30857540   21141174   17108112   13177552    8857263    3694448
   50~60 |  58692214   35209045   26433009   20602277   15728484   11163812    8112640    2347487
   60~70 |  52429478   32984988   23948648   18656144   13609055   10648467    8470255    2813590
   70~80 |  48844652   30609186   22294542   16614342   12442488    9713238    6371155    1508659
   80~90 |  53785462   26689732   19984357   15527313   12020973    9500491    4700349     910969
  90~100 |  48247618   26739266   19791835   14165952   11884339    7834229    5396294     520321
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.61       0.11       0.20       0.17       0.00       0.12       0.04       0.48
   20~30 |      0.68       0.18       0.11       0.00       0.14       0.38       0.29       3.86
   30~40 |      0.29       0.43       0.25       0.23       0.33       0.33       0.67       4.41
   40~50 |      0.18       0.41       0.73       0.14       0.00       0.05       1.69      12.87
   50~60 |      0.27       0.32       0.12       0.21       0.00       0.25       2.50      17.88
   60~70 |      0.11       0.06       0.07       0.05       0.10       0.17       2.12      16.64
   70~80 |      0.24       0.38       0.33       0.25       0.07       0.50       5.00      26.00
   80~90 |      0.24       0.25       0.30       0.21       0.08       0.79       8.36      28.47
  90~100 |      0.05       0.13       0.27       0.10       0.00       2.46       6.83      33.75
-------------------------------------------------------------------------------------------------

commit: 63fc294
ave: 25630202.904
err ave: 2.532
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 107825304   67196769   47719017   36970645   26884437   21161753   13934097   10116656
   20~30 |  87937165   51345174   40081190   29855770   22384402   17608303   11497508    7642279
   30~40 |  75576814   48017465   33836575   25865337   20113239   15300794   11073438    6415975
   40~50 |  71759241   39181871   31507175   21303512   16994990   13241655    9286185    3320082
   50~60 |  59551521   36053368   26237625   20937388   15728484   11270485    8391194    2446959
   60~70 |  52340685   32617874   23972571   18559297   13609055   10487548    7987547    2400671
   70~80 |  47810666   30830480   22529017   16604538   12440118    9944391    6238925    1346296
   80~90 |  53812540   27086558   20283579   15615227   12028936    9206834    4704609    1040032
  90~100 |  48313756   26739266   20197182   14208056   11701189    8150522    5698942     645229
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.56       0.00       0.20       0.33       0.00       0.00       0.04       0.81
   20~30 |      0.79       0.24       0.16       0.06       0.10       0.25       0.52       3.86
   30~40 |      0.29       0.22       0.25       0.18       0.17       0.17       0.33       5.53
   40~50 |      0.24       0.27       0.53       0.07       0.06       0.00       1.23      13.47
   50~60 |      0.14       0.08       0.19       0.07       0.00       0.17       2.05      17.88
   60~70 |      0.16       0.17       0.07       0.10       0.10       0.30       2.75      18.36
   70~80 |      0.47       0.29       0.27       0.25       0.07       0.25       5.44      27.00
   80~90 |      0.24       0.12       0.15       0.16       0.08       1.16       8.21      28.93
  90~100 |      0.05       0.13       0.07       0.10       0.14       2.15       6.30      33.17
-------------------------------------------------------------------------------------------------
```

- 焼きなましのスコア遷移のチェック
    - 概ね良し
        - 温度調整の余地はある
- 焼きなましの高速化
    - 必要部分のみの計算
        - 3倍速くなった、スコアは変わらず

### TODO:

- マトリックスの類似度
    - 次数が大きい順に並べる
    - 難しい
- 分布の追加
    - ランダムに追加する個数の調整
- 類似度関数の検討
- extremeの時のスコア減少の調査
- 各種パラメータを集めて、調整する
- 下駄の調整
    - 必要かどうかの調査する
        - 必要らしい
    - 必要なら大きさの検討
- 焼きなましの調整
    - 初期解の検討
    - 温度調整
        - epsが大きいケースは温度を上げると良い
- Nの再調整
    - 有望なところだけ調べる
- 構築の高速化
    - ボトルネックはシミュレーション

## 11/18

- マトリックスの類似度
    - 次数が大きい順に並べる
    - まずpythonで可視化してみる
        - windowを作って計算量削減する

- 初期解がよければ、分布は増やしても大丈夫
    - 分布を増やすと難しいケースに強くなる
- 分布の辺の数はランダムにして多様性を持たせた方がいい
    - ランダム幅の調整

- スコアのブレが気になる
    - 同じ焼きなましスコアでも最終的なスコアが結構違う
    - 焼きなましスコアの評価が良くない気がする

- 四角の平均の差分を足す
    - 係数の調整が必要
        - メインは次数列で、判断が難しいところを決める
        - 1/20オーダーくらいで良さそう
    - f7が微妙
    - 簡単なケースで少しスコアが落ちるのが気になる

- とにかく効きそうなfを足す

- 初期解の工夫

- 焼きなましの近傍を足す

```
fs-all
ave: 25088930.935
err ave: 2.691
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 111084656   66733806   47344017   37268264   26719963   21161753   13995371   10515963
   20~30 |  88771453   50381215   40101126   29682159   22370711   17399459   11711494    7857692
   30~40 |  75170067   47036789   34320206   25847993   19906343   14821679   10927733    6517415
   40~50 |  59809543   38872897   32557671   20834472   17010073   13096697    9478103    3657819
   50~60 |  51650965   35910511   26374450   20791284   15292324   11263462    8374189    2163589
   60~70 |  52734502   32143630   22640718   17824109   13206564   10217554    7799705    2676037
   70~80 |  49732946   30406067   21348329   15972608   11313804    9455547    6483024    1232434
   80~90 |  54506931   25763981   18809047   15205645   11311108    8927748    4522887    1289189
  90~100 |  47601036   25594961   18400246   13457401   10993866    8023185    6001775     451704
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.33       0.06       0.30       0.25       0.06       0.00       0.00       0.38
   20~30 |      0.68       0.41       0.16       0.12       0.10       0.38       0.33       3.51
   30~40 |      0.36       0.39       0.12       0.18       0.28       0.50       0.48       4.94
   40~50 |      2.18       0.32       0.20       0.29       0.06       0.10       1.08      11.73
   50~60 |      1.18       0.12       0.15       0.14       0.27       0.17       2.32      18.88
   60~70 |      0.05       0.33       0.60       0.48       0.38       0.61       2.75      16.93
   70~80 |      0.06       0.43       0.87       0.65       1.07       0.75       4.69      27.57
   80~90 |      0.12       0.62       0.90       0.42       0.77       1.47       8.86      26.00
  90~100 |      0.29       0.60       0.93       0.62       0.79       2.23       5.87      35.92
-------------------------------------------------------------------------------------------------
```

- 事故っている時に何が起きているのか検証する

```
param-tuned
ave: 26918455.501
err ave: 3.204
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 112167752   68411024   46768399   41715743   30260314   24743312   14823578   10531328
   20~30 |  94946815   51277901   39939102   29196282   23336713   18642041   11559249    7820691
   30~40 |  82652731   47444240   31508239   26468399   20793484   15629611   10260846    6799844
   40~50 |  76780372   41672624   31861774   23464630   18451965   14037248    8850076    4204983
   50~60 |  63660966   39884396   28957199   21825031   16206270   11206333    8131118    2500365
   60~70 |  59205860   37828513   25736480   19284501   13934614    9429295    7312461    2197199
   70~80 |  55591731   34124754   22651907   17028314   11940998    8882500    6257236    1135351
   80~90 |  57722767   27665125   20147847   16049070   11591855    9013210    5294667     949573
  90~100 |  50674148   27981165   20231743   14514443   11399397    8148538    6015327     468669
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      3.06       3.89       3.60       1.50       0.81       0.25       0.33       0.38
   20~30 |      1.37       2.59       3.00       2.44       1.19       0.50       0.19       3.09
   30~40 |      1.43       2.30       3.19       1.86       1.33       0.75       0.29       4.41
   40~50 |      1.24       1.77       1.73       1.00       0.59       0.35       1.23      10.60
   50~60 |      0.59       0.76       0.92       1.07       0.60       0.54       2.27      17.06
   60~70 |      0.74       0.67       1.07       1.10       0.71       1.13       3.50      17.64
   70~80 |      0.76       1.00       1.53       1.10       0.93       1.17       4.88      27.86
   80~90 |      0.71       1.50       1.20       0.84       0.38       1.05       7.07      28.87
  90~100 |      1.10       1.13       0.93       0.76       0.71       2.00       5.74      36.42
-------------------------------------------------------------------------------------------------
```

## 11/19

- 焼きなましの精度を上げる
    - 評価関数の質
        - CONSIDER_RANGEは?
    - 0.5乗?
- 時間の調整
- 類似度の係数
- f7みたいなやつの追加

```
without-square
ave: 27078072.445
err ave: 3.571
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 118857745   74520058   52977449   43258890   29657539   25027403   14914499   10233157
   20~30 |  95022852   55206020   40881164   31088734   23059348   18206580   11418456    6913837
   30~40 |  83995349   47250213   34536475   26810725   20814873   15860774   10075132    5402255
   40~50 |  78774647   42300850   33099890   24176433   17936149   14098892    8519646    3121237
   50~60 |  62796954   38561107   27598433   21037452   15881333   11107722    8441852    1783292
   60~70 |  58880126   37420867   25917565   18899176   13565794    9494052    7769516    2196644
   70~80 |  54774242   34279581   23831401   16212088   11594025    8504658    5296468    1074587
   80~90 |  58173617   28917159   19926817   16005888   11039932    8448705    3663823     783190
  90~100 |  51808625   28896861   19834037   14723206   11534496    7682254    5527876     367381
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.33       2.94       2.60       1.33       1.00       0.12       0.29       0.71
   20~30 |      1.37       1.82       2.84       1.88       1.38       0.75       0.33       4.77
   30~40 |      1.21       2.26       2.31       1.77       1.33       0.62       0.48       7.00
   40~50 |      0.88       1.64       1.40       0.79       0.88       0.30       1.69      14.67
   50~60 |      0.73       1.04       1.42       1.43       0.80       0.67       1.86      20.35
   60~70 |      0.74       0.89       1.07       1.29       1.00       1.09       2.94      19.57
   70~80 |      0.94       0.86       1.13       1.65       1.27       1.67       6.81      29.57
   80~90 |      0.59       1.12       1.30       0.89       0.92       1.74      10.93      31.33
  90~100 |      0.81       0.80       1.13       0.57       0.64       2.62       6.57      37.67
-------------------------------------------------------------------------------------------------

with-square-s10-c2
ave: 26276882.104
err ave: 3.81
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 119910764   67539994   47825574   36246595   29198005   24203330   14484968    9986064
   20~30 |  84018570   51183274   38713051   30418922   22809355   17545062   11590964    6870444
   30~40 |  79007464   46806185   33780134   26318297   19801813   15437098   10753086    4473895
   40~50 |  85257236   41339298   32664778   22018870   18064306   13990587    8732200    4335345
   50~60 |  65122100   39244765   26982383   22320073   16840959   11245236    8094992    1077782
   60~70 |  59612889   37341265   23776047   19299731   13179492    8851222    6758730    1928940
   70~80 |  48794486   35050844   23617437   16960167   11556193    8640250    5316773     974974
   80~90 |  50098137   25716178   20167100   15716322   11476408    8822500    3738207     932675
  90~100 |  44270811   27779970   20672028   14274115   11741309    7755166    5367872     345475
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.33       3.78       4.20       3.25       0.89       0.43       0.31       0.45
   20~30 |      1.56       2.50       3.33       2.83       1.43       0.50       0.29       4.62
   30~40 |      1.71       2.83       2.62       2.00       1.89       0.56       0.11       9.00
   40~50 |      1.33       1.73       1.57       1.29       0.62       0.79       1.40      11.71
   50~60 |      0.46       1.00       1.70       0.75       0.44       0.64       3.00      24.50
   60~70 |      0.78       0.78       1.75       1.09       1.33       1.22       4.90      20.29
   70~80 |      1.25       0.73       0.80       1.36       1.00       1.50       6.25      26.29
   80~90 |      0.90       1.80       1.31       0.60       0.43       1.25      11.00      26.22
  90~100 |      0.90       1.33       1.00       0.75       0.50       2.50       6.83      37.56
-------------------------------------------------------------------------------------------------

baseline
ave: 25301981.004
err ave: 2.748
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 112460317   66452621   51303418   38169643   26239826   21236858   13730441   10365504
   20~30 |  79029206   51122474   38486883   33018443   22104195   17023118   11318981    7428460
   30~40 |  71626984   49608262   34256827   26257632   20183499   15368361   11478174    5274731
   40~50 |  80768999   38002058   31457219   20548896   16667893   13470406    9832298    4294500
   50~60 |  62411199   36127085   25924931   20577530   15473432   11324280    8362508    2191952
   60~70 |  51781921   33273400   23683955   18850427   13906389   10332155    7837348    3116480
   70~80 |  44820977   30904220   21782349   17169220   12121273   10268411    5580882     959719
   80~90 |  45208180   25580618   20015224   15311697   11693665    9591349    5122250    1156864
  90~100 |  39425158   26962152   20416215   13362931   11603273    7583980    4679901     496827
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.67       0.22       0.00       0.00       0.00       0.14       0.08       0.27
   20~30 |      1.33       0.30       0.22       0.00       0.43       0.50       0.57       4.29
   30~40 |      0.14       0.42       0.12       0.00       0.00       0.00       0.11       7.00
   40~50 |      0.22       0.45       0.86       0.00       0.08       0.07       1.00      11.57
   50~60 |      0.08       0.20       0.30       0.00       0.33       0.45       2.36      19.17
   60~70 |      0.33       0.22       0.00       0.00       0.00       0.22       3.10      16.00
   70~80 |      0.12       0.45       0.40       0.09       0.00       0.00       6.75      25.71
   80~90 |      0.20       0.20       0.38       0.00       0.14       0.75       8.75      24.56
  90~100 |      0.10       0.11       0.00       0.33       0.30       2.83       8.17      34.00
-------------------------------------------------------------------------------------------------

untuned-param
ave: 24907764.68
err ave: 3.198
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 113710317   67285954   51303418   36495535   25600206   21215694   13730441    9883506
   20~30 |  80337619   50066919   39547489   33018443   21842699   16385103   11459722    6952980
   30~40 |  72420635   48728632   33840161   25840965   19272579   14645713   11072530    5869251
   40~50 |  80321468   38364046   32575507   20224221   16277905   13363415    9638198    4434598
   50~60 |  62255522   35008784   26015267   20293439   14994146   11075551    8115230    2077479
   60~70 |  52723279   32916257   23683955   17841338   12138794    9176560    6933378    2231015
   70~80 |  44300144   29204705   21591744   15614127   10710169    8167574    4505524     608721
   80~90 |  44105311   25580618   19056611   13844850   10263118    8892635    4640273    1114157
  90~100 |  39564047   26538471   18376758   12589884   10997790    7509762    4749867     389696
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      0.50       0.11       0.00       0.50       0.22       0.14       0.08       0.82
   20~30 |      1.22       0.50       0.00       0.00       0.57       0.83       0.43       5.00
   30~40 |      0.00       0.58       0.25       0.17       0.44       0.44       0.44       6.56
   40~50 |      0.22       0.36       0.57       0.14       0.31       0.14       1.20      10.14
   50~60 |      0.15       0.53       0.30       0.12       0.67       0.55       2.82      20.67
   60~70 |      0.11       0.33       0.00       0.55       1.50       1.44       4.60      16.00
   70~80 |      0.25       1.00       0.50       1.09       1.33       2.25       9.00      32.14
   80~90 |      0.50       0.20       0.92       1.10       1.57       1.50       9.00      25.67
  90~100 |      0.10       0.33       1.00       1.00       0.80       2.83       8.00      38.33
-------------------------------------------------------------------------------------------------

consider_range100
ave: 26522465.278
err ave: 3.768
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 121859458   72236137   44235990   34098160   28827635   24203330   14356762    9662783
   20~30 |  83369075   48997977   41768443   29875241   22803832   16755858   11916972    6845068
   30~40 |  79918557   49924766   34096233   25059550   20137287   15835421   10753086    4768317
   40~50 |  89653311   43278594   34492916   22382898   17235118   14682922    9420000    3664928
   50~60 |  65783368   40269615   29557912   22694750   16614056   11135712    8381360    1775220
   60~70 |  53452387   35971535   25675287   19837565   14348114    9666666    7407998    1939962
   70~80 |  47329081   33874934   23202665   17285666   12313287    8665250    5256145     797399
   80~90 |  49073975   27973942   20433933   16167935   11995205    9320125    5373670     827397
  90~100 |  44537477   28904094   21305361   14812232   12153116    7845000    5068926     397112
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.00       3.11       5.00       3.75       1.00       0.43       0.38       0.82
   20~30 |      1.67       2.90       2.33       3.00       1.57       1.00       0.00       4.96
   30~40 |      1.43       2.17       2.62       2.50       1.67       0.33       0.11       8.56
   40~50 |      0.67       1.27       1.00       1.14       1.08       0.29       0.60      13.29
   50~60 |      0.31       0.73       0.70       0.62       0.56       0.73       1.91      22.17
   60~70 |      1.44       1.22       0.75       0.82       0.33       0.33       3.90      18.57
   70~80 |      1.62       1.09       0.90       1.09       0.33       1.50       7.25      28.14
   80~90 |      1.10       1.00       1.15       0.30       0.00       0.75       9.50      29.22
  90~100 |      0.90       0.89       0.67       0.42       0.20       2.33       7.50      39.89
-------------------------------------------------------------------------------------------------

candidate=2
ave: 26526453.37
err ave: 3.5
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 115450101   63297329   50014907   41005146   30835707   24990429   14729958    9870519
   20~30 |  85234271   51054907   35460038   33215134   20813398   17257706   11733821    7118453
   30~40 |  76303016   46852470   34243703   25589266   21322294   16039349   10864197    5129771
   40~50 |  88349885   40496760   32019074   22919051   18145419   14344841    9620000    4224891
   50~60 |  61508547   38899253   27973738   23506657   16623198   11373961    8368752    1761210
   60~70 |  60399163   36415621   23883620   20405154   14344943    9888888    6868045    1861972
   70~80 |  50156776   34251754   22914489   17993385   12542131    9275000    5792066    1004283
   80~90 |  50473083   27948058   22310429   16215315   11807235    9275000    4522931     984259
  90~100 |  43620314   30472633   22241647   14603388   12409873    8610166    5352194     340863
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.83       4.67       4.00       2.00       0.33       0.14       0.23       0.55
   20~30 |      1.44       2.50       3.78       2.00       2.29       0.67       0.14       4.29
   30~40 |      2.00       2.83       2.38       2.17       1.11       0.22       0.00       7.11
   40~50 |      0.89       1.91       1.71       0.86       0.62       0.50       0.40      11.29
   50~60 |      1.08       1.07       1.30       0.25       0.56       0.55       2.27      18.50
   60~70 |      0.67       1.00       1.50       0.55       0.33       0.11       4.70      18.43
   70~80 |      1.00       0.91       1.10       0.73       0.17       0.75       6.00      27.71
   80~90 |      0.70       1.00       0.31       0.30       0.14       0.75       9.00      26.22
  90~100 |      1.10       0.33       0.33       0.50       0.00       1.50       6.75      38.22
-------------------------------------------------------------------------------------------------

simulate=20
ave: 26762328.848
err ave: 3.386
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 122231536   64788792   44176700   35786668   29380294   24957299   14825627    9796549
   20~30 |  81863408   54461524   35488594   30552564   23690623   17838541   11733821    7077357
   30~40 |  84977165   54075638   32581741   24208871   21743873   15115256   10864197    5359310
   40~50 |  84183757   43241837   34277789   22607969   18100536   14870116    9800000    4571244
   50~60 |  63315018   38889696   27677096   22570246   16924569   11405169    8955855    2081130
   60~70 |  60801124   34526230   24901477   20357292   14440254   10000000    7638797    2608379
   70~80 |  51459361   34155845   23739289   18552142   12753102    9750000    5416415    1223489
   80~90 |  51344028   28644657   21912434   16084436   11807235    9161250    4274330    1209612
  90~100 |  44752603   29105112   21689976   15152836   12309873    8581666    6010137     389242
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.00       4.22       5.20       3.25       0.78       0.14       0.15       0.64
   20~30 |      1.89       1.80       3.78       2.83       1.00       0.33       0.14       4.25
   30~40 |      0.71       1.50       2.88       2.75       0.89       0.89       0.00       6.78
   40~50 |      1.56       1.18       1.00       1.00       0.62       0.14       0.20       9.71
   50~60 |      0.77       1.13       1.40       0.62       0.33       0.55       1.18      20.67
   60~70 |      0.56       1.56       1.00       0.55       0.33       0.00       3.20      16.43
   70~80 |      0.75       1.00       0.70       0.45       0.00       0.25       6.75      26.71
   80~90 |      0.60       0.80       0.46       0.40       0.14       0.88       9.00      25.67
  90~100 |      0.90       0.78       0.50       0.17       0.10       1.50       5.58      36.78
-------------------------------------------------------------------------------------------------

commit: 7667992
ave: 26640569.784
err ave: 3.478
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 120870482   66551923   46075221   35103594   29074549   24488323   14982705    9986064
   20~30 |  86567953   57730756   37672020   32172224   23752272   17441715   11426129    7242538
   30~40 |  79646850   49206464   33817138   27595982   21889974   16079960   10864197    5744407
   40~50 |  84349505   39025123   31890971   23448716   18049451   14583973    8780980    4782103
   50~60 |  64733307   39179321   27471506   23149514   16255423   11569765    8846324    1851702
   60~70 |  55672680   35286012   25496716   20611742   13575598    9666666    7112337    2634100
   70~80 |  51208436   32531287   23874869   19252348   12753102   10000000    5813100     860266
   80~90 |  50012477   29762713   22209395   16364013   11995205    9637500    3932529     952667
  90~100 |  43150213   29674912   22544677   14976896   12278294    8084112    4814881     416149
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      2.17       4.11       4.60       3.50       0.89       0.29       0.08       0.45
   20~30 |      1.33       1.30       3.11       2.33       1.00       0.50       0.43       3.88
   30~40 |      1.57       2.42       2.50       1.58       0.89       0.22       0.00       6.33
   40~50 |      1.67       2.18       1.71       0.71       0.62       0.36       1.40       9.71
   50~60 |      0.46       1.00       1.50       0.38       0.78       0.36       1.45      21.67
   60~70 |      1.00       1.44       0.75       0.45       0.83       0.33       3.80      16.29
   70~80 |      0.88       1.45       0.60       0.09       0.00       0.00       6.50      28.57
   80~90 |      0.90       0.40       0.31       0.20       0.00       0.38      10.50      26.22
  90~100 |      1.20       0.56       0.17       0.25       0.10       2.33       8.08      37.44
-------------------------------------------------------------------------------------------------
```

```
commit: d8c8524
baseline:
ave: 27056674.127
err ave: 3.866
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 120883841   71056270   51518707   39858510   29051752   23402783   16385650   10480537
   20~30 |  88514808   53966194   42182236   27186320   21137589   17414508   12083522    7290835
   30~40 |  84780702   51512149   36241637   25750766   19578601   14917704   11411283    6013777
   40~50 |  78507047   40105139   32746775   22883482   19150481   14691181    9128390    3079191
   50~60 |  59548011   36356406   27034765   21548833   17429079   11941269    8355656    2033486
   60~70 |  56311333   35352828   24879797   20363231   15452881   11296883    7707423    2264835
   70~80 |  52159716   32269340   24277139   19162903   14136736    9801439    6013863    1166201
   80~90 |  56776550   27484501   21080536   18502137   13051203    9888038    4317348     695304
  90~100 |  48639769   26534296   21277158   16039709   13256492    8280694    5130959     365350
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      1.56       2.78       2.30       2.17       2.56       2.12       1.04       2.33
   20~30 |      2.26       1.71       1.63       3.56       3.05       2.25       1.57       5.26
   30~40 |      1.14       1.35       1.38       2.41       2.28       2.17       1.76       6.82
   40~50 |      1.06       2.27       1.53       2.21       1.06       1.15       2.38      13.87
   50~60 |      1.64       2.04       1.77       1.64       0.60       1.21       3.00      18.82
   60~70 |      1.53       1.50       1.80       1.43       0.76       1.09       3.69      19.36
   70~80 |      1.53       1.43       1.53       0.90       0.87       1.75       5.94      26.86
   80~90 |      1.65       2.00       1.85       0.74       0.77       1.26       9.79      30.67
  90~100 |      2.05       2.20       1.33       0.90       0.57       2.62       7.74      36.08
-------------------------------------------------------------------------------------------------

commit: 37d6cc7
ave: 27409380.679
err ave: 3.158
         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 | 118945646   73267003   50229087   37684981   29655475   23095386   16063766   11245225
   20~30 |  95659265   56593947   42589890   30917587   22497786   18263259   11693070    7016522
   30~40 |  84990980   49755327   35973901   25609274   19432644   15065013   11710290    6568349
   40~50 |  76572538   40803877   32264420   23933570   17666764   14537127    9167043    3451634
   50~60 |  61574906   37832321   28643677   21958325   15594348   11811568    8276993    2531530
   60~70 |  58199737   36214020   25290178   20091761   14567389   11177978    7292014    2054387
   70~80 |  52650484   33219142   23954238   18348583   14137157    9963444    6505932    1162608
   80~90 |  57719009   30239543   21632823   17045464   13286491    9465226    4537336     758030
  90~100 |  53355944   27299846   20343889   15179978   12537722    8751050    5989994     549296
-------------------------------------------------------------------------------------------------

         |    0~0.05   0.05~0.1   0.1~0.15   0.15~0.2   0.2~0.25   0.25~0.3   0.3~0.35   0.35~0.4
-------------------------------------------------------------------------------------------------
   10~20 |      1.67       1.78       2.30       2.33       1.88       2.12       1.25       1.00
   20~30 |      1.37       1.18       1.53       1.25       1.43       1.12       1.43       5.00
   30~40 |      0.57       1.26       1.12       1.77       1.94       1.46       0.76       5.47
   40~50 |      1.00       1.32       0.73       0.79       0.94       0.65       1.62      13.07
   50~60 |      0.95       1.24       0.38       0.79       1.13       0.67       2.41      16.06
   60~70 |      0.58       0.56       0.47       0.57       0.38       0.39       3.81      18.79
   70~80 |      0.88       0.62       0.73       0.55       0.40       0.67       4.75      28.29
   80~90 |      0.94       0.12       0.25       0.37       0.08       1.00       9.07      29.93
  90~100 |      0.52       1.00       1.00       0.43       0.29       1.46       5.52      35.92
-------------------------------------------------------------------------------------------------
```